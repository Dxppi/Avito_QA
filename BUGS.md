# Отчет об Обнаруженных Багах API

---

## Баг 0

**Title:** Нарушение REST-контракта: POST /api/1/item возвращает строку статуса вместо JSON-объекта ресурса.

**Description:**
API возвращает неполноценный ответ: вместо полного JSON-объекта созданного объявления, эндпоинт отдает текстовое сообщение со статусом и ID. Это требует от клиента сложного парсинга строки для получения идентификатора, **критически усложняя клиентскую логику**.

**Steps to Reproduce:**
1. Отправить **POST** запрос с корректным телом на `/api/1/item`.
2. Проанализировать тело ответа.

**Expected Result:**
API должен вернуть **полный JSON-объект** созданного объявления.

**Actual Result:**
API возвращает JSON с полем `status`, содержащим текстовое сообщение с ID.

**Severity:** Major (Высокая)

**Priority:** High (Высокий)

---

## Баг 1

**Title:** Избыточность: Два функционально идентичных эндпоинта для получения статистики.

**Description:**
В API присутствуют два **абсолютно идентичных** эндпоинта (`/api/1/statistic/{id}` и `/api/2/statistic/{id}`) без различий в контракте или функциональности. Это создает путаницу и является **техническим долгом**.

**Steps to Reproduce:**
1. Создать объявление и сохранить ID.
2. Выполнить **GET** запрос на `/api/1/statistic/{id}` и `/api/2/statistic/{id}`.
3. Сравнить ответы.

**Expected Result:**
В API должен быть **один канонический эндпоинт** для этой операции.

**Actual Result:**
Оба эндпоинта возвращают идентичные данные.

**Severity:** Minor (Низкая)

**Priority:** Low (Низкий)

---

## Баг 2

**Title:** Некорректные HTTP-Статусы для несуществующих ресурсов (400, 200 вместо 404).

**Description:**
API нарушает HTTP-стандарты для несуществующих ресурсов: **GET** запросы возвращают **400 Bad Request**, а **DELETE** возвращает **200 OK**. Это **затрудняет корректную обработку ошибок** на стороне клиента.

**Steps to Reproduce:**
1. Отправить **GET** запрос на `/api/1/item/nonexistent-id`.
2. Отправить **GET** запрос на `/api/1/statistic/nonexistent-id`.
3. Отправить **DELETE** запрос на `/api/2/item/nonexistent-id`.
4. Проверить статус-коды.

**Expected Result:**
Все операции с несуществующими ресурсами должны возвращать **404 Not Found**.

**Actual Result:**
**GET** возвращает **400 Bad Request**, **DELETE** возвращает **200 OK**.

**Severity:** Major (Высокая)

**Priority:** High (Высокий)

---

## Баг 3

**Title:** Неконсистентность именования: Разный регистр поля `sellerID` в запросе и ответе.

**Description:**
Имя поля идентификатора продавца не стандартизировано: **"sellerID"** в запросе и **"sellerId"** в ответе. Эта разница в регистре (PascalCase vs. camelCase) приводит к **ошибкам десериализации** в клиентских приложениях.

**Steps to Reproduce:**
1. Отправить **POST** запрос с полем `"sellerID"`.
2. Получить ответ.
3. Проверить регистр поля `"sellerId"` в ответе.

**Expected Result:**
Имя поля должно быть **идентичным** (например, всегда `sellerId`) в запросах и ответах API.

**Actual Result:**
`sellerID` (запрос) vs. `sellerId` (ответ).

**Severity:** Major (Высокая)

**Priority:** High (Высокий)

---

## Баг 4

**Title:** Отсутствие валидации: API принимает невалидные значения (отрицательные числа, пустые строки).

**Description:**
API не выполняет **базовую валидацию** данных при создании объявления. Это позволяет создавать ресурсы с пустым названием, отрицательной ценой или отрицательной статистикой, что приводит к **порче данных** в системе.

**Steps to Reproduce:**
1. Отправить **POST** запрос с пустым именем: `"name": ""`.
2. Отправить **POST** запрос с отрицательной ценой: `"price": -100`.
3. Отправить **POST** запрос с отрицательной статистикой: `"likes": -10`.
4. Проверить факт создания объявления.

**Expected Result:**
API должен возвращать **400 Bad Request** для всех некорректных бизнес-данных.

**Actual Result:**
Объявления создаются с некорректными данными.

**Severity:** Major (Высокая)

**Priority:** Medium (Средний)

---

## Баг 5

**Title:** Нарушение целостности данных: Статистика остается доступной после удаления объявления.

**Description:**
После успешного удаления объявления через `DELETE /api/2/item/{id}`, связанные данные статистики **остаются доступными** через эндпоинт `/api/1/statistic/{id}`. Это **нарушает ссылочную целостность** и ведет к утечке устаревших данных.

**Steps to Reproduce:**
1. Создать объявление, сохранить ID.
2. Удалить объявление через **DELETE** `/api/2/item/{id}`.
3. Проверить, что объявление недоступно (**GET** `/api/1/item/{id}` возвращает **404**).
4. Проверить, что статистика **доступна** (**GET** `/api/1/statistic/{id}` возвращает данные).

**Expected Result:**
После удаления основного объявления, все связанные данные должны быть **недоступны** (**404 Not Found**).

**Actual Result:**
Статистика остается доступной после удаления объявления.

**Severity:** Major (Высокая)

**Priority:** Medium (Средний)