# TESTCASES.md

## 1. Ручка: Создать объявление (`POST /api/1/item`)

### Тест-кейс 1.1 (Позитивный)
**ID:** **TC-C-001**
**Description:** **Успешное создание объявления с корректными обязательными полями.**
**Precondition:** Сервис доступен.
**Execution:**
1. Сгенерировать **уникальный** `sellerID` в диапазоне 111111-999999.
2. Подготовить тело запроса, содержащее **все обязательные поля** (`sellerID`, `name`, `price`, `statistics`) с корректными типами данных.
3. Отправить **POST** запрос на `/api/1/item`.

**Expected result:** 1. Статус-код **200 OK**.
2. В теле ответа возвращается JSON-объект, содержащий **уникальный `id`** (string) для нового объявления.
3. Поля `sellerID`, `name`, `price` и `statistics` в ответе совпадают с отправленными.

---

### Тест-кейс 1.2 (Негативный: Отсутствие обязательного поля)
**ID:** **TC-C-002**
**Description:** **Попытка создания объявления без обязательного поля (`name`).**
**Precondition:** Сервис доступен.
**Execution:**
1. Подготовить тело запроса, **исключив** поле `name`.
2. Отправить **POST** запрос на `/api/1/item`.

**Expected result:** 1. Статус-код **400 Bad Request**.
2. В теле ответа присутствует информативное сообщение о том, что поле `name` является обязательным/отсутствует.

---

### Тест-кейс 1.3 (Негативный: Некорректный тип данных)
**ID:** **TC-C-003**
**Description:** **Попытка создания объявления с неверным типом данных для поля `price` (строка вместо integer).**
**Precondition:** Сервис доступен.
**Execution:**
1. Подготовить тело запроса, где поле `price` содержит **строковое** значение (например, `"один миллион"`).
2. Отправить **POST** запрос на `/api/1/item`.

**Expected result:** 1. Статус-код **400 Bad Request**.
2. В теле ответа присутствует сообщение о неверном типе данных для `price`.

---

### Тест-кейс 1.4 (Краевой)
**ID:** **TC-C-004**
**Description:** **Создание объявления с максимально допустимым значением для числовых полей.**
**Precondition:** Сервис доступен.
**Execution:**
1. Подготовить тело запроса, где поля `price`, `likes`, `viewCount`, `contacts` содержат **максимально большое целое число** (например, 2147483647).
2. Отправить **POST** запрос на `/api/1/item`.

**Expected result:** 1. Статус-код **200 OK**.
2. Объявление успешно создано, и все большие числовые значения **корректно** сохранены.

---

### Тест-кейс 1.5 (Негативный: Пустое название)
**ID:** **TC-C-005**
**Description:** **Попытка создания объявления с пустым названием.**
**Precondition:** Сервис доступен.
**Execution:**
1. Подготовить тело запроса с пустой строкой в поле `name`.
2. Отправить **POST** запрос на `/api/1/item`.

**Expected result:** 1. Статус-код **400 Bad Request**.
2. В теле ответа присутствует сообщение о недопустимости пустого названия.

---

### Тест-кейс 1.6 (Краевой: Отрицательные значения)
**ID:** **TC-C-006**
**Description:** **Создание объявления с отрицательными значениями числовых полей.**
**Precondition:** Сервис доступен.
**Execution:**
1. Подготовить тело запроса с отрицательными значениями для `price`, `likes`, `viewCount`, `contacts`.
2. Отправить **POST** запрос на `/api/1/item`.

**Expected result:** 1. Статус-код **200 OK** или **400 Bad Request** в зависимости от валидации.
2. Объявление либо создано с отрицательными значениями, либо возвращена ошибка валидации.

---

## 2. Ручка: Получить объявление по его ID (`GET /api/1/item/{id}`)

### Тест-кейс 2.1 (Позитивный)
**ID:** **TC-G-001**
**Description:** **Успешное получение данных по существующему ID.**
**Precondition:** **Успешно выполнено TC-C-001**, `id` созданного объявления известен.
**Execution:**
1. Отправить **GET** запрос на `/api/1/item/{id}`, используя **известный `id`**.

**Expected result:** 1. Статус-код **200 OK**.
2. В теле ответа содержится массив с **одним объектом**, структура которого соответствует схеме объявления.
3. Данные в полученном объекте **совпадают** с данными, отправленными при создании.

---

### Тест-кейс 2.2 (Негативный)
**ID:** **TC-G-002**
**Description:** **Запрос объявления по несуществующему ID.**
**Precondition:** Сервис доступен.
**Execution:**
1. Сгенерировать **случайный ID**, который гарантированно отсутствует в системе.
2. Отправить **GET** запрос на `/api/1/item/{случайный ID}`.

**Expected result:** 1. Статус-код **404 Not Found**.
2. В теле ответа присутствует сообщение о том, что объявление не найдено.

---

### Тест-кейс 2.3 (Позитивный: Удаление объявления)
**ID:** **TC-G-003**
**Description:** **Успешное удаление объявления и проверка его отсутствия.**
**Precondition:** **Успешно выполнено TC-C-001**, `id` созданного объявления известен.
**Execution:**
1. Отправить **DELETE** запрос на `/api/2/item/{id}`.
2. Отправить **GET** запрос на `/api/1/item/{id}` для проверки.

**Expected result:** 1. Статус-код **200 OK** для DELETE запроса.
2. Статус-код **404 Not Found** для последующего GET запроса.

---

## 3. Ручка: Получить все объявления по ID продавца (`GET /api/1/{sellerID}/item`)

### Тест-кейс 3.1 (Позитивный)
**ID:** **TC-A-001**
**Description:** **Успешное получение всех объявлений для существующего продавца, имеющего несколько объявлений.**
**Precondition:** **Предварительно созданы минимум два объявления** с одинаковым `sellerID`.
**Execution:**
1. Отправить **GET** запрос на `/api/1/{sellerID}/item`, используя `sellerID` из предусловий.

**Expected result:** 1. Статус-код **200 OK**.
2. В теле ответа содержится массив, включающий **все** созданные объявления для этого `sellerID`.

---

### Тест-кейс 3.2 (Краевой)
**ID:** **TC-A-002**
**Description:** **Запрос объявлений для `sellerID`, который существует, но не имеет объявлений.**
**Precondition:** **Сгенерирован уникальный `sellerID`**, который **никогда не использовался** для создания объявлений.
**Execution:**
1. Отправить **GET** запрос на `/api/1/{уникальный, но неиспользованный sellerID}/item`.

**Expected result:** 1. Статус-код **200 OK**.
2. В теле ответа возвращается **пустой массив** (`[]`).

---

### Тест-кейс 3.3 (Негативный)
**ID:** **TC-A-003**
**Description:** **Запрос с невалидным типом данных для `sellerID` (строка вместо integer).**
**Precondition:** Сервис доступен.
**Execution:**
1. Отправить **GET** запрос на `/api/1/{sellerID}/item`, используя **строку** (например, "test_user") вместо числа в пути.

**Expected result:** 1. Статус-код **400 Bad Request**.
2. В теле ответа присутствует сообщение о неверном формате `sellerID` (ожидается число).

---

## 4. Ручка: Получить статистику по item ID (`GET /api/1/statistic/{id}`)

### Тест-кейс 4.1 (Позитивный)
**ID:** **TC-S-001**
**Description:** **Успешное получение статистики по существующему ID.**
**Precondition:** **Успешно выполнено TC-C-001**, `id` объявления известен.
**Execution:**
1. Отправить **GET** запрос на `/api/1/statistic/{id}`, используя **известный `id`**.

**Expected result:** 1. Статус-код **200 OK**.
2. В ответе содержится массив с объектом статистики, содержащим поля: `likes`, `viewCount`, `contacts` (все integer).
3. Значения статистики **совпадают** с теми, что были отправлены при создании объявления.

---

### Тест-кейс 4.2 (Негативный)
**ID:** **TC-S-002**
**Description:** **Запрос статистики по несуществующему ID.**
**Precondition:** Сервис доступен.
**Execution:**
1. Отправить **GET** запрос на `/api/1/statistic/{id}`, используя **случайный/несуществующий ID**.

**Expected result:** 1. Статус-код **404 Not Found**.
2. В теле ответа присутствует сообщение о том, что объявление не найдено.

---

### Тест-кейс 4.3 (Позитивный: Статистика v2)
**ID:** **TC-S-003**
**Description:** **Успешное получение статистики через эндпоинт v2.**
**Precondition:** **Успешно выполнено TC-C-001**, `id` объявления известен.
**Execution:**
1. Отправить **GET** запрос на `/api/2/statistic/{id}`, используя **известный `id`**.

**Expected result:** 1. Статус-код **200 OK**.
2. В ответе содержится массив с объектом статистики, идентичным ответу от v1 эндпоинта.

---

### Тест-кейс 4.4 (Негативный: Статистика v2 несуществующего)
**ID:** **TC-S-004**
**Description:** **Запрос статистики v2 по несуществующему ID.**
**Precondition:** Сервис доступен.
**Execution:**
1. Отправить **GET** запрос на `/api/2/statistic/{id}`, используя **случайный/несуществующий ID**.

**Expected result:** 1. Статус-код **404 Not Found**.
2. В теле ответа присутствует сообщение о том, что объявление не найдено.

## 5. Ручка: Удалить объявление по ID (`DELETE /api/2/item/{id}`)

### Тест-кейс 5.1 (Позитивный)
**ID:** **TC-D-001**
**Description:** **Успешное удаление существующего объявления.**
**Precondition:** **Успешно выполнено TC-C-001**, `id` созданного объявления известен.
**Execution:**
1. Отправить **DELETE** запрос на `/api/2/item/{id}`.
2. Отправить **GET** запрос на `/api/1/item/{id}` для проверки удаления.

**Expected result:** 1. Статус-код **200 OK** для DELETE запроса.
2. Статус-код **404 Not Found** для последующего GET запроса.

---

### Тест-кейс 5.2 (Негативный)
**ID:** **TC-D-002**
**Description:** **Попытка удаления несуществующего объявления.**
**Precondition:** Сервис доступен.
**Execution:**
1. Сгенерировать **случайный ID**, который гарантированно отсутствует в системе.
2. Отправить **DELETE** запрос на `/api/2/item/{случайный ID}`.

**Expected result:** 1. Статус-код **404 Not Found**.
2. В теле ответа присутствует сообщение о том, что объявление не найдено.

---

### Тест-кейс 5.3 (Негативный: Повторное удаление)
**ID:** **TC-D-003**
**Description:** **Попытка повторного удаления уже удаленного объявления.**
**Precondition:** **Успешно выполнено TC-D-001**, объявление уже удалено.
**Execution:**
1. Отправить **DELETE** запрос на `/api/2/item/{id}` уже удаленного объявления.

**Expected result:** 1. Статус-код **404 Not Found**.
2. В теле ответа присутствует сообщение о том, что объявление не найдено.

---

## 6. Ручка: Получить статистику по item ID v2 (`GET /api/2/statistic/{id}`)

### Тест-кейс 6.1 (Позитивный: Сравнение v1 и v2)
**ID:** **TC-SV-001**
**Description:** **Сравнение ответов статистики от v1 и v2 эндпоинтов.**
**Precondition:** **Успешно выполнено TC-C-001**, `id` объявления известен.
**Execution:**
1. Отправить **GET** запрос на `/api/1/statistic/{id}`.
2. Отправить **GET** запрос на `/api/2/statistic/{id}`.
3. Сравнить ответы от обоих эндпоинтов.

**Expected result:** 1. Статус-код **200 OK** для обоих запросов.
2. Данные статистики в ответах идентичны.

---

### Тест-кейс 6.2 (Краевой: Большие значения статистики)
**ID:** **TC-SV-002**
**Description:** **Проверка статистики с максимальными значениями.**
**Precondition:** **Создано объявление с максимальными значениями статистики**.
**Execution:**
1. Отправить **GET** запрос на `/api/2/statistic/{id}` для объявления с большими значениями статистики.

**Expected result:** 1. Статус-код **200 OK**.
2. Значения статистики корректно отображаются.

---

## 7. Интеграционные тесты

### Тест-кейс 7.1 (Интеграционный: Полный цикл)
**ID:** **TC-I-001**
**Description:** **Проверка полного жизненного цикла объявления.**
**Precondition:** Сервис доступен.
**Execution:**
1. Создать объявление (POST /api/1/item).
2. Получить созданное объявление (GET /api/1/item/{id}).
3. Получить статистику объявления (GET /api/1/statistic/{id}).
4. Получить все объявления продавца (GET /api/1/{sellerID}/item).
5. Удалить объявление (DELETE /api/2/item/{id}).
6. Проверить отсутствие объявления (GET /api/1/item/{id}).

**Expected result:** Все шаги выполняются успешно с ожидаемыми статус-кодами.
